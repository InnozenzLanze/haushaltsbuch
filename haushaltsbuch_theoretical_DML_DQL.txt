DML/DQL nach UseCaseDiagramm

ALTER TABLE = Ändert die Struktur einer Tabelle
UPDATE tabellenname SET = Ändert den Inhalt einer Tabelle

Auswirkung von Datentypen in Berechnung
FLOAT (single precision)= anzahl*preis Berechnungen ungenau. Grund ist die Speicherung als binär
DOUBLE (double precision)= anzahl*preis funktionieren, SUM(anzahl*preis) auch bei geringeren Werten minimal ungenau (0,0000 0000 0000 000X)
DECIMAL (exact; Fließkommazahl bestehend aus Ganzahl mit Kommaposition)= anzahl*preis funktionieren genau

__1.0
INSERT INTO haushaltsbuch.ort(
	PLZ, ortname
	)
VALUES	(insert_PLZ, insert_ortname)
;

__1.1
SELECT * FROM haushaltsbuch.ort
;

__1.2.1
UPDATE haushaltsbuch.ort
SET	PLZ = update_PLZ
WHERE 	PLZ = Condition_PLZ
;
__1.2.2
UPDATE haushaltsbuch.ort
SET	ort = update_ort
WHERE 	PLZ = Condition_PLZ
;
//Sinnhaftigkeit?

__1.3
DELETE
//fortführen

__2.0
INSERT INTO haushaltsbuch.laden(
	strasse, hausNr, PLZ
	)
VALUES	(insert_strasse, insert_hausNr, insert_PLZ)
;

__2.1
SELECT 	haushaltsbuch.laden.strasse, 
	haushaltsbuch.laden.hausNr, 
	haushaltsbuch.ort.PLZ, 
	haushaltsbuch.ort.ortname 
FROM haushaltsbuch.laden
JOIN haushaltsbuch.ort ON haushaltsbuch.ort.PLZ = haushaltsbuch.laden.PLZ
;

__2.2
UPDATE
//fortführen

__2.3
DELETE
//fortführen

__3.0
INSERT INTO haushaltsbuch.haendler(
	haendlername, IDLaden
	)
VALUES	(insert_haendlername, insert_IDLaden)
;

__3.1
SELECT 	haushaltsbuch.haendler.haendlername,
	haushaltsbuch.laden.strasse,
	haushaltsbuch.laden.hausNr,
	haushaltsbuch.ort.PLZ,
	haushaltsbuch.ort.ortname
FROM haushaltsbuch.haendler
JOIN haushaltsbuch.laden ON haushaltsbuch.laden.IDLaden = haushaltsbuch.haendler.IDLaden
JOIN haushaltsbuch.ort ON haushaltsbuch.ort.PLZ = haushaltsbuch.laden.PLZ
;

__3.2
UPDATE
//fortführen

__3.3
DELETE
//fortführen

__4.0
INSERT INTO haushaltsbuch.kategorie(
	bezeichnung
	)
VALUES	(insert_bezeichnung)
;

__4.1
SELECT * FROM haushaltsbuch.kategorie
;

__4.2
UPDATE
//fortführen

__4.3
DELETE
//fortführen

__5.0
INSERT INTO haushaltsbuch.artikel(
	bezeichnung, notiz, IDKategorie
	)
VALUES	(insert_bezeichnung, insert_notiz, insert_IDKategorie)
; 

__5.1
SELECT 	haushaltsbuch.artikel.IDArtikel,
	haushaltsbuch.artikel.bezeichnung,
	haushaltsbuch.artikel.notiz,
	haushaltsbuch.kategorie.bezeichnung
FROM haushaltsbuch.artikel
JOIN haushaltsbuch.kategorie ON haushaltsbuch.kategorie.IDKategorie = haushaltsbuch.artikel.IDKategorie
;

__5.2
UPDATE
//fortführen

__5.3
DELETE
//fortführen

__6.0 
INSERT INTO haushaltsbbuch.benutzer(
	nachname, 
	vorname, 
	geburtsdatum, 
	budget
	)
VALUES(	
	insert_nachname, 
	insert_vorname, 
	insert_geburtsdatum, 
	insert_budget
	)
;

__6.1
SELECT 	haushaltsbuch.benutzer.nachname,
	haushaltsbuch.benutzer.vorname,
	haushaltsbuch.benutzer.geburtsdatum,
	haushaltsbuch.benutzer.budget 
FROM haushaltsbuch.benutzer
;

__6.2
UPDATE
//fortführen

__6.3
DELETE
//fortführen

__7.0
INSERT INTO haushaltsbuch.einkauf(
	belegNr, 
	datum, 
	IDBenutzer, 
	IDHaendler
	)
VALUES(
	insert_belegNr, 
	insert_datum, 
	insert_IDBenutzer, 
	insert_IDHaendler
	)
;

__7.1
SELECT 	haushaltsbuch.einkauf.belegNr,
	haushaltsbuch.einkauf.datum,
	haushaltsbuch.benutzer.nachname,
	haushaltsbuch.benutzer.vorname,
	haushaltsbuch.haendler.haendlername
FROM haushaltsbuch.einkauf
JOIN haushaltsbuch.benutzer ON haushaltsbuch.benutzer.IDBenutzer = haushaltsbuch.einkauf.IDBenutzer
JOIN haushaltsbuch.haendler ON haushaltsbuch.haendler.IDHaendler = haushaltsbuch.einkauf.IDHaendler
;
//Summen

__7.2
UPDATE
//fortführen

__7.3
DELETE
//fortführen

__8.0
INSERT INTO haushaltsbuch.positionnr(
	anzahl, 
	preis, 
	luxus, 
	notiz, 
	IDArtikel, 
	IDEinkauf
	)
VALUES(
	insert_anzahl, 
	insert_preis, 
	insert_luxus, 
	insert_notiz, 
	insert_IDArtikel, 
	insert_IDEinkauf
	)
;

__8.1
SELECT 	haushaltsbuch.positionnr.IDPositionNr,
	haushaltsbuch.positionnr.anzahl,
	haushaltsbuch.artikel.bezeichnung,
	haushaltsbuch.kategorie.bezeichnung,
	haushaltsbuch.positionnr.preis,
	haushaltsbuch.positionnr.luxus,
	haushaltsbuch.einkauf.belegNr,
	haushaltsbuch.positionnr.notiz
FROM haushaltsbuch.positionnr
JOIN haushaltsbuch.artikel ON haushaltsbuch.artikel.IDArtikel = haushaltsbuch.positionnr.IDArtikel
JOIN haushaltsbuch.kategorie ON haushaltsbuch.kategorie.IDKategorie = haushaltsbuch.artikel.IDKategorie
JOIN haushaltsbuch.einkauf ON haushaltsbuch.einkauf.IDEinkauf = haushaltsbuch.positionnr.IDEinkauf
;

__8.2
UPDATE
//fortführen

__8.3
DELETE
//fortführen

__9.0.0 Luxusartikel
SELECT 	haushaltsbuch.positionnr.IDPositionNr,
	haushaltsbuch.positionnr.anzahl,
	haushaltsbuch.artikel.bezeichnung,
	haushaltsbuch.kategorie.bezeichnung,
	haushaltsbuch.positionnr.preis,
	haushaltsbuch.einkauf.belegNr,
	haushaltsbuch.positionnr.notiz
FROM haushaltsbuch.positionnr
JOIN haushaltsbuch.artikel ON haushaltsbuch.artikel.IDArtikel = haushaltsbuch.positionnr.IDArtikel
JOIN haushaltsbuch.kategorie ON haushaltsbuch.kategorie.IDKategorie = haushaltsbuch.artikel.IDKategorie
JOIN haushaltsbuch.einkauf ON haushaltsbuch.einkauf.IDEinkauf = haushaltsbuch.positionnr.IDEinkauf
WHERE positionnr.luxus = 1
;

__9.0.1 keine Luxusartikel
SELECT 	haushaltsbuch.positionnr.IDPositionNr,
	haushaltsbuch.positionnr.anzahl,
	haushaltsbuch.artikel.bezeichnung,
	haushaltsbuch.kategorie.bezeichnung,
	haushaltsbuch.positionnr.preis,
	haushaltsbuch.einkauf.belegNr,
	haushaltsbuch.positionnr.notiz
FROM haushaltsbuch.positionnr
JOIN haushaltsbuch.artikel ON haushaltsbuch.artikel.IDArtikel = haushaltsbuch.positionnr.IDArtikel
JOIN haushaltsbuch.kategorie ON haushaltsbuch.kategorie.IDKategorie = haushaltsbuch.artikel.IDKategorie
JOIN haushaltsbuch.einkauf ON haushaltsbuch.einkauf.IDEinkauf = haushaltsbuch.positionnr.IDEinkauf
WHERE positionnr.luxus = 0
;

__9.1.0+9.2.0 Summe berechnen und anzeigen von positionnr.luxus=1
SELECT	haushaltsbuch.positionnr.IDPositionNr,
	haushaltsbuch.positionnr.anzahl,
	haushaltsbuch.artikel.bezeichnung,
	haushaltsbuch.kategorie.bezeichnung,
	haushaltsbuch.positionnr.preis,
	anzahl*preis AS preis_gesamt,
	haushaltsbuch.einkauf.belegNr,
	haushaltsbuch.positionnr.notiz
FROM haushaltsbuch.positionnr
JOIN haushaltsbuch.artikel ON haushaltsbuch.artikel.IDArtikel = haushaltsbuch.positionnr.IDArtikel
JOIN haushaltsbuch.kategorie ON haushaltsbuch.kategorie.IDKategorie = haushaltsbuch.artikel.IDKategorie
JOIN haushaltsbuch.einkauf ON haushaltsbuch.einkauf.IDEinkauf = haushaltsbuch.positionnr.IDEinkauf
WHERE luxus = 1
;

__9.1.1+9.2.1 Summe berechnen und anzeigen von positionnr.luxus=0
SELECT	haushaltsbuch.positionnr.IDPositionNr,
	haushaltsbuch.positionnr.anzahl,
	haushaltsbuch.artikel.bezeichnung,
	haushaltsbuch.kategorie.bezeichnung,
	haushaltsbuch.positionnr.preis,
	anzahl*preis AS preis_gesamt,
	haushaltsbuch.einkauf.belegNr,
	haushaltsbuch.positionnr.notiz
FROM haushaltsbuch.positionnr
JOIN haushaltsbuch.artikel ON haushaltsbuch.artikel.IDArtikel = haushaltsbuch.positionnr.IDArtikel
JOIN haushaltsbuch.kategorie ON haushaltsbuch.kategorie.IDKategorie = haushaltsbuch.artikel.IDKategorie
JOIN haushaltsbuch.einkauf ON haushaltsbuch.einkauf.IDEinkauf = haushaltsbuch.positionnr.IDEinkauf
WHERE luxus = 0
;

__10.0+10.1 Summe berechnen und anzeigen von einkauf
SELECT	haushaltsbuch.einkauf.belegNr,
	haushaltsbuch.einkauf.datum,
	haushaltsbuch.benutzer.nachname,
	haushaltsbuch.benutzer.vorname,
	haushaltsbuch.haendler.haendlername,
	SUM(anzahl*preis) AS summe_einkauf
FROM haushaltsbuch.einkauf
JOIN haushaltsbuch.benutzer ON haushaltsbuch.benutzer.IDBenutzer = haushaltsbuch.einkauf.IDBenutzer
JOIN haushaltsbuch.haendler ON haushaltsbuch.haendler.IDHaendler = haushaltsbuch.einkauf.IDHaendler
JOIN haushaltsbuch.positionnr ON haushaltsbuch.positionnr.IDEinkauf = haushaltsbuch.einkauf.IDEinkauf
GROUP BY einkauf.belegNr
;

__11.0 nach kategorie gruppieren (für spätere zuordnung budget und anzeige)
SELECT	haushaltsbuch.kategorie.bezeichnung,
	SUM(anzahl*preis) AS summe_einkauf_kategorie
FROM haushaltsbuch.kategorie
JOIN haushaltsbuch.artikel ON haushaltsbuch.artikel.IDKategorie = haushaltsbuch.kategorie.IDKategorie
JOIN haushaltsbuch.positionnr ON haushaltsbuch.positionnr.IDArtikel = haushaltsbuch.artikel.IDArtikel
GROUP BY kategorie.bezeichnung
;

__12.0 benutzer.budget aktualisieren
UPDATE


